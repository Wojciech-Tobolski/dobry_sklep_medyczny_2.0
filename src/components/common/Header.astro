---
const currentPath = Astro.url.pathname;

const navItems = [
  { href: "/", label: "Strona główna" },
  { href: "/produkty", label: "Produkty" },
  { href: "/o-nas", label: "O nas" },
  { href: "/refundacje-nfz", label: "Refundacje NFZ" },
  { href: "/kontakt", label: "Kontakt" },
];

const isActive = (href: string) => {
  if (href === "/") {
    return currentPath === "/";
  }
  return currentPath.startsWith(href);
};
---

<header class="bg-primary-500 text-white shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center space-x-2">
          <div
            class="w-10 h-10 bg-white rounded-lg flex items-center justify-center"
          >
            <span class="text-primary-500 font-bold text-lg">DS</span>
          </div>
          <div>
            <h1 class="text-xl font-bold">Dobry Sklep Medyczny</h1>
            <p class="text-xs opacity-90">Sprzęt ortopedyczny</p>
          </div>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class={`font-medium hover:text-primary-100 transition-colors ${
                isActive(item.href)
                  ? "text-white border-b-2 border-white"
                  : "text-primary-100"
              }`}
            >
              {item.label}
            </a>
          ))
        }
      </nav>

      <!-- Phone Number -->
      <div class="hidden md:flex items-center space-x-4">
        <a
          href="tel:+48711234567"
          class="flex items-center space-x-2 bg-white/20 px-4 py-2 rounded-lg hover:bg-white/30 transition-colors"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"
            ></path>
          </svg>
          <span class="font-semibold">600 778 042</span>
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden p-2 rounded-lg hover:bg-white/20 transition-colors"
        aria-label="Otwórz menu"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="md:hidden hidden">
      <div class="px-2 pt-2 pb-3 space-y-1 border-t border-white/20">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class={`block px-3 py-2 rounded-md text-base font-medium ${
                isActive(item.href)
                  ? "bg-white/20 text-white"
                  : "text-primary-100 hover:bg-white/10 hover:text-white"
              }`}
            >
              {item.label}
            </a>
          ))
        }
        <div class="pt-4 border-t border-white/20">
          <a
            href="tel:600778042"
            class="flex items-center space-x-2 px-3 py-2 text-primary-100 hover:text-white"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"
              ></path>
            </svg>
            <span>600 778 042</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");

  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener("click", () => {
      const isHidden = mobileMenu.classList.contains("hidden");

      if (isHidden) {
        mobileMenu.classList.remove("hidden");
        mobileMenuButton.setAttribute("aria-label", "Zamknij menu");
        mobileMenuButton.innerHTML = `
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        `;
      } else {
        mobileMenu.classList.add("hidden");
        mobileMenuButton.setAttribute("aria-label", "Otwórz menu");
        mobileMenuButton.innerHTML = `
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        `;
      }
    });

    // Close mobile menu when clicking on a link
    const mobileLinks = mobileMenu.querySelectorAll("a");
    mobileLinks.forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
        mobileMenuButton.setAttribute("aria-label", "Otwórz menu");
        mobileMenuButton.innerHTML = `
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        `;
      });
    });
  }
</script>
