---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const products = await getCollection("products");
  return products.map((entry) => ({
    params: { slug: entry.data.slug || entry.slug },
    props: { product: entry },
  }));
}

const { product } = Astro.props;
const { Content } = await product.render();
---

<Layout title={product.data.name || product.data.title}>
  <main class="container mx-auto px-4 py-8">
    <h1>{product.data.name || product.data.title}</h1>
    <p>Cena: {product.data.salePrice || 0} z≈Ç</p>
    <Content />
  </main>
</Layout>
